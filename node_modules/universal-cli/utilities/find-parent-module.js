"use strict";
var fs = require('fs');
var path = require('path');
var SilentError = require('silent-error');
function findParentModule(project, currentDir) {
    var root = 'app';
    var sourceRoot = path.join(project.root, project.ngConfig.apps[0].root, root);
    // trim currentDir
    currentDir = currentDir.replace(path.join(project.ngConfig.apps[0].root, root), '');
    var pathToCheck = path.join(sourceRoot, currentDir);
    while (pathToCheck.length >= sourceRoot.length) {
        // TODO: refactor to not be based upon file name
        var files = fs.readdirSync(pathToCheck)
            .filter(function (fileName) { return !fileName.endsWith('routing.module.ts'); })
            .filter(function (fileName) { return fileName.endsWith('.module.ts'); })
            .filter(function (fileName) { return fs.statSync(path.join(pathToCheck, fileName)).isFile(); });
        if (files.length > 0) {
            return files.map(function (file) { return path.join(pathToCheck, file); });
        }
        // move to parent directory
        pathToCheck = path.dirname(pathToCheck);
    }
    throw new SilentError('No module files found');
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = findParentModule;
;
//# sourceMappingURL=/home/david/angular-cli/packages/universal-cli/utilities/find-parent-module.js.map